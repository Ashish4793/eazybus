<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>EazyBus</title>
  <meta name="theme-color" content="#010483">
  <meta content="" name="description">
  <meta content="" name="keywords">
  <!-- Favicons -->
  <link href="assets/img/favicon.png" rel="icon">

  <!-- Google Fonts -->
  <link
    href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Montserrat:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
    rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="assets/vendor/remixicon/remixicon.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/flick/jquery-ui.css">
  <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/flick/jquery-ui.css">

  <!-- Template Main CSS File -->

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
  <link rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/@ttskch/select2-bootstrap4-theme@x.x.x/dist/select2-bootstrap4.min.css">
  <link href="assets/css/book.css" rel="stylesheet">
  <link href="assets/css/style.css" rel="stylesheet">
</head>
<style>
  fa-circle-arrow-left:hover {
    color: black;
  }

  .btn-group-toggle .btn input[type="radio"] {
    display: none;
  }
</style>

<body>

  <!-- ======= Header ======= -->
  <header style="background-color: #01036f;" id="header" class="fixed-top d-flex align-items-center header-transparent">
    <div class="container d-flex align-items-center justify-content-between">

      <div class="logo">
        <h1><a href="/"><img style="margin-bottom: 0.5rem;" width="37px" src="assets/img/favicon.png"
              alt="logo"><span>EazyBus</span></a></h1>
      </div>

      <nav id="navbar" class="navbar">
        <ul>
          <li><a class="nav-link scrollto active" href="/">Home</a></li>
          <li class="dropdown"><a href="#"><span>My Account</span> <i class="bi bi-chevron-down"></i></a>
            <ul>
              <li><a href="/bookings">Trips<i class="fa-solid fa-suitcase-rolling"></i></a></li>
              <li><a href="/profile">Profile<i class="fa-solid fa-user"></i></a></li>
              <li><a href="/wallet">Wallet<i class="fa-solid fa-wallet"></i></a></li>
            </ul>
          </li>
        </ul>
        <i class="bi bi-list mobile-nav-toggle"></i>
      </nav><!-- .navbar -->

    </div>
  </header><!-- End Header -->



  <!-- START #main -->
  <main style="margin-bottom: 1rem;" id="main">
    <section style="background-color: #ffffff;">
      <h2 style="margin-top: 3rem; margin-bottom: 2rem; font-weight: 500;"
        class="text-4xl font-bold dark:text-white text-center">Update Profile</h2>
      <div style="margin-top: 1px;" class="container">
        <div class="row d-flex justify-content-center align-items-center h-100">
          <div class="col-md-12 col-xl-4">
            <% if (err===true) { %>
              <div id="alert-border-2" class="msg msg-danger msg-danger-text"> <i class="fa-solid fa-circle-exclamation"
                  style="color: #c9302c; margin-right: 10px;"></i> <span><strong>Something went wrong! </strong>Maybe
                  the details already exists.</span>
              </div>
              <% } %>
                <% if (profileUpdate===true) { %>
                  <div id="alert-border-3" class="msg msg-success msg-success-text"> <i class="fa-solid fa-circle-check"
                      style="color: #33b300;"></i>
                    <span>Profile Updated!</span>
                  </div>
                  <% } %>
                    <div style="display: none;" id="genderAlert">
                      <div class="msg msg-danger msg-danger-text"> <i class="fa-solid fa-circle-exclamation"
                          style="color: #c9302c; margin-right: 10px;"></i> <span>Please select your gender!</span>
                      </div>
                    </div>

                    <div class="card" style="border-radius: 15px;">
                      <a href="/profile">
                        <button style="background-color: transparent; border: none; margin-top: 0.6rem;" type="button"
                          class="btn btn-primary">
                          <i class="fa-solid fa-circle-arrow-left fa-xl" style="color: #8b8b8b;"></i></button>
                      </a>
                      <form onsubmit="return validateForm()" action="/editprofile" method="POST">
                        <div class="card-body text-center">
                          <div class="mb-3">
                            <input hidden name="user_id" value="<%= user._id %>" type="text">
                            <label style="float: left; font-weight: 500;" class="form-label">Name</label>
                            <input value="<%= user.name %>" name="name" required minlength="3" type="text"
                              class="form-control shadow-none">
                          </div>
                          <div class="mb-3">
                            <label style="float: left; font-weight: 500;" class="form-label">Phone Number</label>
                            <input
                              oninvalid="this.setCustomValidity('Phone number cannot contain alphabetic characters')"
                              oninput="setCustomValidity('')" value="<%= user.phone %>" name="phone" required type="tel"
                              minlength="10" maxlength="10" pattern="[1-9]{1}[0-9]{9}" class="form-control shadow-none">
                          </div>
                          <div class="row">
                            <div class="col-12" style="display: block;">
                              <label style="float: left; font-weight: 500;" class="form-label">Gender</label>
                            </div>
                            <div style="float: left;" class="btn-group btn-group-toggle" data-toggle="buttons">
                              <% if (user.gender==="Male" ){ %>
                                <label class="btn btn-sm btn-outline-primary active">
                                  <img style="margin-bottom: 3px;" width="20" height="20"
                                    src="https://img.icons8.com/color/20/000000/user-male.png" alt="user-male" />
                                  <input onclick="validateForm()" checked type="radio" name="pax_gender" value="Male">
                                  Male
                                </label>
                                <label class="btn btn-sm btn-outline-primary">
                                  <img style="margin-bottom: 3px;" width="20" height="20"
                                    src="https://img.icons8.com/color/20/000000/user-female.png" alt="user-female" />
                                  <input onclick="validateForm()" type="radio" name="gender" value="Female"> Female
                                </label>
                                <% } else { %>
                                  <label class="btn btn-sm btn-outline-primary">
                                    <img style="margin-bottom: 3px;" width="20" height="20"
                                      src="https://img.icons8.com/color/20/000000/user-male.png" alt="user-male" />
                                    <input onclick="validateForm()" type="radio" name="gender" value="Male"> Male
                                  </label>
                                  <label class="btn btn-sm btn-outline-primary active">
                                    <img style="margin-bottom: 3px;" width="20" height="20"
                                      src="https://img.icons8.com/color/20/000000/user-female.png" alt="user-female" />
                                    <input onclick="validateForm()" checked type="radio" name="pax_gender"
                                      value="Female"> Female
                                  </label>
                                  <% } %>

                            </div>
                          </div>
                          <div class="mb-3">
                            <button type="submit" style="background-color: #1acc8d; border: none; margin-top: 1rem;"
                              class="btn btn-primary">confirm changes</button>
                          </div>
                        </div>
                      </form>
                    </div>

          </div>
        </div>
      </div>
    </section>
  </main><!-- End #main -->

  <!-- ======= Footer ======= -->
  <%- include("partials/footer"); -%>
    <!-- End Footer -->

    <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i
        class="bi bi-arrow-up-short"></i></a>
    <div id="preloader"></div>

    <!-- Vendor JS Files -->
    <script src="https://code.jquery.com/jquery-3.6.4.js"
      integrity="sha256-a9jBBRygX1Bh5lt8GZjXDzyOB+bWve9EiO7tROUtj/E=" crossorigin="anonymous"></script>
    <script src="https://kit.fontawesome.com/3ea55f06b5.js" crossorigin="anonymous"></script>
    <script src="assets/vendor/purecounter/purecounter_vanilla.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
      crossorigin="anonymous"></script>
    <script src="assets/vendor/aos/aos.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
    <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
    <!-- Template Main JS File -->
    <script src="assets/js/main.js"></script>
    <script>
      $(document).ready(function () {
        $('.btn-group-toggle .btn').click(function () {
          $('.btn-group-toggle .btn').removeClass('active');
          $(this).addClass('active');
        });
      });

      function validateForm() {
        var radios = document.getElementsByName("gender");
        var radioSelected = false;

        for (var i = 0; i < radios.length; i++) {
          if (radios[i].checked) {
            radioSelected = true;
            break;
          }
        }

        if (!radioSelected) {
          $('#genderAlert').show();
          return false;
        }

        // If validation passes, the form can be submitted
        $('#genderAlert').hide();
        return true;
      }
    </script>
    <script>
      function subscribeClick(e) {
        e.preventDefault();
        document.getElementById("subscribe_form").reset();
        Swal.fire(
          'Hurray! Subscribed!',
          '',
          'success'
        )
        return false;
      }
      const d = new Date();
      let year = d.getFullYear();
      document.getElementById("year").innerHTML = year;
      $(function () {
        setTimeout(function () { $("#alert-border-3").fadeOut(1000); }, 6000)
      });
      $(function () {
        setTimeout(function () { $("#alert-border-2").fadeOut(1000); }, 6000)
      });
    </script>

</body>

</html>